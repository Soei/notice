"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const c=require("@soei/util"),a=require("@soei/util/position"),i=require("vue"),d=(e,t)=>{const s=e.__vccOpts||e;for(const[o,r]of t)s[o]=r;return s},m={name:"Notice",props:{visible:{type:Boolean,default:!1},lazy:{type:[Number,String],default:1e3},start:{type:[Number,String],default:800},position:{type:String,default:"bottom"},bind:{type:Object},animate:{type:Boolean,default:!0},resize:{type:Boolean,default:!0},mouseleave:{type:[Number,String],default:300},filter:{type:Function,default:e=>e}},data(){return{show:!1,target:null,room:this.$refs.refNotice,css:{left:0,top:0},mark:"emx-leave",M:{Escape:!0,27:!0}}},mounted(){this.room=this.$refs.refNotice,this.esc(!0)},unmounted(){this.esc(!1)},methods:{esc(e){try{document.documentElement[e?"addEventListener":"removeEventListener"]("keyup",this.escfx)}catch{}},escfx(e){this.M[c.picker(e,"key|code|keyCode=>k").k]&&this.leave(10)},draw:a.resize,reDraw(e){setTimeout(()=>{this.target=e;let t=this.room.style,s=this.room.offsetHeight,o=t.display;s||(t.display="block"),a.position(this),s||(t.display=o)},+this.start)},enter(){clearTimeout(this.showmark)},leave(e){e<=-1||(clearTimeout(this.showmark),this.showmark=setTimeout(()=>{this.$emit("update:visible",!1)},+e?e:this.lazy))},appendEx(e){e.hasAttribute(this.mark)||(e.setAttribute(this.mark,""),e.addEventListener("mouseleave",()=>{this.mouseleave<=-1||(this.$emit("update:bind",null),this.leave())}))}},watch:{visible(e){setTimeout(()=>{this.show=e},+this.start)},bind(e,t){e&&(clearTimeout(this.showmark),this.appendEx(e),this.resize&&a.observer.observe(e),this.$nextTick(()=>{this.reDraw(e)})),t&&a.observer.unobserve(t)}}},h={class:"notice-content"};function f(e,t,s,o,r,n){return i.withDirectives((i.openBlock(),i.createElementBlock("div",{ref:"refNotice",class:i.normalizeClass(["notice",{"ex-animating":s.animate}]),style:i.normalizeStyle(s.filter(r.css)),onMouseleave:t[0]||(t[0]=l=>n.leave(s.mouseleave)),onMouseenter:t[1]||(t[1]=(...l)=>n.enter&&n.enter(...l)),onKeyup:t[2]||(t[2]=i.withKeys(l=>n.leave(10),["esc"]))},[i.createElementVNode("div",h,[i.renderSlot(e.$slots,"default",{},void 0,!0)])],38)),[[i.vShow,r.show]])}const u=d(m,[["render",f],["__scopeId","data-v-496437c1"]]),v=[u],p={install(e){v.forEach(t=>{e.component("S"+t.name,t)})}};exports.Notice=u;exports.default=p;
