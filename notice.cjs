"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const h=require("@soei/util"),r=require("@soei/util/position"),i=require("vue"),c=(e,t)=>{const s=e.__vccOpts||e;for(const[l,o]of t)s[l]=o;return s},f={name:"Notice",props:{visible:{type:Boolean,default:!1},lazy:{type:[Number,String],default:1e3},start:{type:[Number,String],default:800},position:{type:String,default:"bottom"},bind:{type:Object},animate:{type:Boolean,default:!0},resize:{type:Boolean,default:!0},mouseleave:{type:[Number,String],default:300},filter:{type:Function,default:e=>e}},data(){return{show:!1,target:null,room:this.$refs.refNotice,css:{left:0,top:0},mark:"emx-leave",M:{Escape:!0,27:!0},has:!1}},mounted(){this.room=this.$refs.refNotice,this.esc(!0)},unmounted(){this.esc(!1)},methods:{esc(e){try{document.documentElement[e?"addEventListener":"removeEventListener"]("keyup",this.escfx)}catch{}},escfx(e){this.M[h.picker(e,"key|code|keyCode=>k").k]&&this.leave(10)},draw:r.resize,reDraw(e){setTimeout(()=>{let t=this.room.style,s=this.room.offsetHeight,l=t.display;e&&e.offsetHeight?(s||(t.display="block"),r.position(this),s||(t.display=l)):this.$visible(!1)},+this.start)},enter(){clearTimeout(this.showmark)},leave(e){e<=-1||(clearTimeout(this.showmark),this.showmark=setTimeout(()=>{this.$emit("update:visible",!1)},+e?e:this.lazy))},appendEx(e){e.hasAttribute(this.mark)||(e.setAttribute(this.mark,""),e.addEventListener("mouseleave",()=>{this.mouseleave<=-1||(this.$emit("update:bind",null),this.leave())}))},$visible(e){setTimeout(()=>{this.has=!/^0\w*$/.test(this.room.style.top),this.has||(this.target&&r.position(this),this.has=!0),this.show=e},+this.start)}},watch:{visible(e){this.$visible(e)},bind(e,t){e&&(this.target=e),this.$visible(e&&e.offsetHeight),e&&(clearTimeout(this.showmark),this.appendEx(e),this.resize&&r.observer.observe(e),this.$nextTick(()=>{this.reDraw(e)})),t&&r.observer.unobserve(t)}}},d={class:"notice-content"};function m(e,t,s,l,o,n){return i.withDirectives((i.openBlock(),i.createElementBlock("div",{ref:"refNotice",class:i.normalizeClass(["notice",{"ex-animating":o.has&&s.animate}]),style:i.normalizeStyle(s.filter(o.css)),onMouseleave:t[0]||(t[0]=a=>n.leave(s.mouseleave)),onMouseenter:t[1]||(t[1]=(...a)=>n.enter&&n.enter(...a)),onKeyup:t[2]||(t[2]=i.withKeys(a=>n.leave(10),["esc"]))},[i.createElementVNode("div",d,[i.renderSlot(e.$slots,"default",{},void 0,!0)])],38)),[[i.vShow,o.show]])}const u=c(f,[["render",m],["__scopeId","data-v-ff1b6c93"]]),v=[u],p={install(e){v.forEach(t=>{e.component("S"+t.name,t)})}};exports.Notice=u;exports.default=p;
