"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const u=require("@soei/util"),n=require("@soei/util/position"),s=require("vue");const d=(e,t)=>{const i=e.__vccOpts||e;for(const[l,r]of t)i[l]=r;return i},m={name:"Notice",props:{visible:{type:Boolean,default:!1},lazy:{type:[Number,String],default:1e3},position:{type:String,default:"bottom"},bind:{type:Object},animate:{type:Boolean,default:!0},filter:{type:Function,default:e=>e}},data(){return{target:null,room:this.$refs.refNotice,css:{left:0,top:0},mark:"emx-leave",M:{Escape:!0,27:!0}}},mounted(){this.room=this.$refs.refNotice,this.esc(!0)},unmounted(){this.esc(!1)},methods:{esc(e){try{document.documentElement[e?"addEventListener":"removeEventListener"]("keyup",this.escfx)}catch{}},escfx(e){this.M[u.picker(e,"key|code|keyCode=>k").k]&&this.leave(10)},draw:n.resize,reDraw(e){this.target=e,n.position(this)},enter(){clearTimeout(this.showmark)},leave(e){clearTimeout(this.showmark),this.showmark=setTimeout(()=>{this.$emit("update:visible",!1)},+e?e:this.lazy)},appendEx(e){e.hasAttribute(this.mark)||(e.setAttribute(this.mark,""),e.addEventListener("mouseleave",()=>{this.$emit("update:bind",null),this.leave()}))}},watch:{bind(e,t){e&&(clearTimeout(this.showmark),this.appendEx(e),n.observer.observe(e),this.$nextTick(()=>{this.reDraw(e)})),t&&n.observer.unobserve(t)}}},f={class:"notice-content"};function v(e,t,i,l,r,o){return s.withDirectives((s.openBlock(),s.createElementBlock("div",{ref:"refNotice",class:s.normalizeClass(["notice",{"ex-animating":i.animate}]),style:s.normalizeStyle(i.filter(r.css)),onMouseleave:t[0]||(t[0]=a=>o.leave(300)),onMouseenter:t[1]||(t[1]=(...a)=>o.enter&&o.enter(...a)),onKeyup:t[2]||(t[2]=s.withKeys(a=>o.leave(10),["esc"]))},[s.createElementVNode("div",f,[s.renderSlot(e.$slots,"default",{},void 0,!0)])],38)),[[s.vShow,i.visible]])}const c=d(m,[["render",v],["__scopeId","data-v-74b7c05f"]]),h=[c],p={install(e){h.forEach(t=>{e.component("S"+t.name,t)})}};exports.Notice=c;exports.default=p;
